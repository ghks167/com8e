<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- image.xml -->

<mapper namespace="com.com8e.image.dao.IImageDao">

	<insert id="insertImage"
		parameterType="com.com8e.image.vo.ImageVO">
		INSERT INTO image (
		image_no,
		image_parent_no,
		image_category,
		image_file_name,
		image_original_name,
		image_file_size,
		image_fancy_size,
		image_content_type,
		image_path,
		image_down_cnt,
		image_del_yn,
		image_reg_date
		) VALUES (
		image_seq.nextval,
		#{image_parent_no},
		#{image_category},
		#{image_file_name},
		#{image_original_name},
		#{image_file_size},
		#{image_fancy_size},
		#{image_content_type},
		#{image_path},
		0,
		'N',
		SYSDATE
		)
	</insert>

	<select id="selectImageByParentNo" parameterType="int"
		resultType="com.com8e.image.vo.ImageVO">
		SELECT
		image_no,
		image_original_name,
		image_fancy_size,
		image_down_cnt,
		TO_CHAR(atch_reg_date,'YY.MM.DD HH24:MI') AS atch_reg_date
		FROM image
		WHERE image_parent_no = #{image_parent_no}
		AND image_del_yn = 'N'

	</select>

</mapper>